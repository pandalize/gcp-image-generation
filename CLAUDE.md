# Claude作業メモ - GCP画像生成プロジェクト

## 📋 プロジェクト概要
- GCP A100/T4 GPUを使った大規模AI画像・動画生成
- 5万円の無料クレジットを3日で効率的に消費
- Stable Diffusion XL + Stable Video Diffusionパイプライン

## 🔧 作業ルール

### スクリプト作成・修正ルール
**❌ やらない：**
- Cloud Shellで `cat > script.sh << 'EOF'` を使ったスクリプト作成
- リモートでの直接ファイル編集

**✅ やること：**
1. ローカル（Claude Code）でスクリプトを作成・修正
2. GitHubにコミット・プッシュ
3. Cloud Shellで `git pull` して最新版を取得
4. 実行

### 理由
- バージョン管理の一貫性
- コードレビュー可能
- バックアップの確実性
- 複数環境での同期

## 📊 現在の状況

### GPUクォータ状況
- **NVIDIA_A100_GPUS**: 0台（要申請）
- **NVIDIA_T4_GPUS**: 1台（利用可能）
- **NVIDIA_V100_GPUS**: 1台（利用可能）

### 選択したGPU
- **T4 GPU**: 約500円/時間
- **理由**: A100が使用不可のため、コスパ良好なT4を選択
- **予算内稼働時間**: 約100時間

### 発生した問題
1. **Deep Learning Platform イメージエラー**
   - `pytorch-latest-gpu` ファミリが見つからない
   - **解決策**: Ubuntu 20.04ベースに変更

2. **スクリプトエラーハンドリング**
   - エラー発生時も成功メッセージが表示
   - **解決策**: 適切なエラーチェックを追加

## 🎯 次のタスク
1. 修正版 `create-t4-vm-ubuntu.sh` をローカル作成
2. エラーハンドリングを改善
3. GitHubプッシュ
4. Cloud Shellでpull → 実行
5. VM環境構築 → 画像生成開始

## 💡 学習内容
- GCPのクォータ制限とGPU利用可能性の確認重要性
- Deep Learning Platform イメージの依存関係
- コスト効率を考慮したGPU選択の必要性