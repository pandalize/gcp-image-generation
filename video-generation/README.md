# GCP AIå‹•ç”»ç”Ÿæˆãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆ

A100 GPUã‚’ä½¿ç”¨ã—ãŸå¤§è¦æ¨¡AIå‹•ç”»ç”Ÿæˆã‚·ã‚¹ãƒ†ãƒ ã€‚ç”»åƒç”Ÿæˆã‹ã‚‰å‹•ç”»å¤‰æ›ã¾ã§å®Œå…¨è‡ªå‹•åŒ–ã€‚

## ğŸ¬ ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ¦‚è¦

**ç”»åƒâ†’å‹•ç”»ã®å®šç•ªãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ï¼š**
1. **Stable Diffusion XL**ã§é«˜å“è³ªã‚­ãƒ¼ãƒ•ãƒ¬ãƒ¼ãƒ ç”Ÿæˆ
2. **Stable Video Diffusion**ã§ç”»åƒã‚’å‹•ç”»åŒ–
3. **AnimateDiff**ã§ã‚¹ãƒ ãƒ¼ã‚ºãªã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³
4. é«˜åº¦ãªã‚¨ãƒ•ã‚§ã‚¯ãƒˆã¨å¾Œå‡¦ç†

## ğŸ“Š ã‚³ã‚¹ãƒˆãƒ»ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹

| æ§‹æˆ | æ™‚é–“å˜ä¾¡ | 24æ™‚é–“ | ç”Ÿæˆå¯èƒ½æ•° |
|------|---------|--------|-----------|
| A100 x1 | 3,000å†† | 72,000å†† | å‹•ç”»100æœ¬ |
| A100 x3 | 9,000å†† | 216,000å†† | å‹•ç”»300æœ¬ |
| A100 x5 | 15,000å†† | 360,000å†† | å‹•ç”»500æœ¬ |

**5ä¸‡å††ã§ç”Ÿæˆå¯èƒ½ï¼š**
- ç´„16æ™‚é–“ç¨¼åƒ
- ç´„50-70æœ¬ã®é«˜å“è³ªå‹•ç”»ï¼ˆå„30ç§’ï¼‰
- æ•°åƒæšã®ã‚­ãƒ¼ãƒ•ãƒ¬ãƒ¼ãƒ ç”»åƒ

## ğŸš€ ã‚¯ã‚¤ãƒƒã‚¯ã‚¹ã‚¿ãƒ¼ãƒˆ

### 1. ç’°å¢ƒã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—

```bash
# VMã«SSHæ¥ç¶šå¾Œ
cd video-generation
bash setup-video-env.sh
```

### 2. å˜ä¸€å‹•ç”»ç”Ÿæˆ

```bash
# åŸºæœ¬çš„ãªç”»åƒâ†’å‹•ç”»å¤‰æ›
python image-to-video-pipeline.py \
  --mode single \
  --prompts "sunset over ocean" "tropical beach" "waves crashing" \
  --output my_video.mp4
```

### 3. å¤§é‡ç”Ÿæˆãƒ¢ãƒ¼ãƒ‰

```bash
# 100æœ¬ã®å‹•ç”»ã‚’è‡ªå‹•ç”Ÿæˆ
python image-to-video-pipeline.py \
  --mode massive \
  --num-videos 100
```

### 4. ä¸¦åˆ—å‡¦ç†ï¼ˆè¤‡æ•°VMï¼‰

```bash
# 5å°ã®VMã§ä¸¦åˆ—å®Ÿè¡Œ
bash parallel-video-generation.sh
```

## ğŸ¨ ç”Ÿæˆã•ã‚Œã‚‹å‹•ç”»ã®ç¨®é¡

### åŸºæœ¬ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³
- **è§£åƒåº¦**: 768x768 â†’ 1920x1080ï¼ˆã‚¢ãƒƒãƒ—ã‚¹ã‚±ãƒ¼ãƒ«ï¼‰
- **ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¬ãƒ¼ãƒˆ**: 30fps
- **å‹•ç”»é•·**: 15-30ç§’
- **ã‚¹ã‚¿ã‚¤ãƒ«**: ãƒ•ã‚©ãƒˆãƒªã‚¢ãƒ«ã€ã‚¢ãƒ‹ãƒ¡ã€æ²¹çµµé¢¨ãªã©

### é«˜åº¦ãªã‚¨ãƒ•ã‚§ã‚¯ãƒˆ
```bash
# ã‚¯ãƒªã‚¨ã‚¤ãƒ†ã‚£ãƒ–ãƒ¢ãƒ¼ãƒ‰ï¼ˆã‚¹ã‚¿ã‚¤ãƒ«å¤‰æ›ä»˜ãï¼‰
python advanced-video-effects.py --mode creative

# ã‚¿ã‚¤ãƒ ãƒ©ãƒ—ã‚¹ç”Ÿæˆ
python advanced-video-effects.py --mode timelapse \
  --prompt "flower blooming time-lapse"

# ãƒ¢ãƒ¼ãƒ•ã‚£ãƒ³ã‚°å‹•ç”»
python advanced-video-effects.py --mode morphing
```

## ğŸ“ ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ§‹é€ 

```
video-generation/
â”œâ”€â”€ setup-video-env.sh              # ç’°å¢ƒæ§‹ç¯‰
â”œâ”€â”€ image-to-video-pipeline.py      # ãƒ¡ã‚¤ãƒ³ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³
â”œâ”€â”€ advanced-video-effects.py       # é«˜åº¦ãªã‚¨ãƒ•ã‚§ã‚¯ãƒˆ
â”œâ”€â”€ parallel-video-generation.sh    # ä¸¦åˆ—å‡¦ç†
â””â”€â”€ outputs/
    â”œâ”€â”€ images/     # ã‚­ãƒ¼ãƒ•ãƒ¬ãƒ¼ãƒ ç”»åƒ
    â”œâ”€â”€ videos/     # ç”Ÿæˆå‹•ç”»
    â””â”€â”€ final/      # æœ€çµ‚å‡ºåŠ›
```

## ğŸ› ï¸ æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯

### ãƒ¢ãƒ‡ãƒ«
- **Stable Diffusion XL**: ã‚­ãƒ¼ãƒ•ãƒ¬ãƒ¼ãƒ ç”Ÿæˆ
- **Stable Video Diffusion**: img2vidå¤‰æ›
- **AnimateDiff**: ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ç”Ÿæˆ
- **ControlNet**: è©³ç´°åˆ¶å¾¡ï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼‰

### ãƒ©ã‚¤ãƒ–ãƒ©ãƒª
- PyTorch + CUDA
- Diffusers (Hugging Face)
- OpenCV + MoviePy
- FFmpeg

## âš¡ ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æœ€é©åŒ–

### GPUæœ€é©åŒ–
- xFormersæœ‰åŠ¹åŒ–
- Mixed Precision (FP16)
- ãƒãƒƒãƒå‡¦ç†
- ãƒ¡ãƒ¢ãƒªåŠ¹ç‡åŒ–

### å‡¦ç†é€Ÿåº¦
- ã‚­ãƒ¼ãƒ•ãƒ¬ãƒ¼ãƒ : 3-5ç§’/æš
- å‹•ç”»å¤‰æ›: 30-60ç§’/æœ¬
- ç·åˆ: 1-2åˆ†/å‹•ç”»

## ğŸ’° ã‚³ã‚¹ãƒˆç®¡ç†

### è‡ªå‹•åœæ­¢æ©Ÿèƒ½
```bash
# ã‚³ã‚¹ãƒˆä¸Šé™ã§è‡ªå‹•åœæ­¢ï¼ˆ4.5ä¸‡å††ï¼‰
./auto-stop-at-budget.sh &

# ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ã‚³ã‚¹ãƒˆç¢ºèª
./check-current-cost.sh
```

### æ¨å¥¨è¨­å®šï¼ˆ5ä¸‡å††äºˆç®—ï¼‰
1. **é«˜é€Ÿæ¶ˆè²»**: A100 x3å°ã€6æ™‚é–“
2. **ãƒãƒ©ãƒ³ã‚¹**: A100 x2å°ã€8æ™‚é–“
3. **é•·æ™‚é–“**: A100 x1å°ã€16æ™‚é–“

## ğŸ“ˆ ã‚¹ã‚±ãƒ¼ãƒªãƒ³ã‚°

### Cloud Storageé€£æº
```bash
# ç”Ÿæˆç‰©ã‚’è‡ªå‹•ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰
gsutil -m cp -r outputs/videos gs://your-bucket/
```

### åˆ†æ•£å‡¦ç†
- æœ€å¤§10å°ã¾ã§ä¸¦åˆ—å¯èƒ½
- è‡ªå‹•è² è·åˆ†æ•£
- éšœå®³æ™‚ã®è‡ªå‹•ãƒªãƒˆãƒ©ã‚¤

## ğŸ¯ ãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹

1. **ã‚³ãƒ³ãƒ†ãƒ³ãƒ„åˆ¶ä½œ**
   - YouTube/TikTokå‹•ç”»
   - åºƒå‘Šç´ æ
   - VFXãƒ—ãƒ­ãƒˆã‚¿ã‚¤ãƒ—

2. **ã‚¢ãƒ¼ãƒˆä½œå“**
   - ã‚¸ã‚§ãƒãƒ©ãƒ†ã‚£ãƒ–ã‚¢ãƒ¼ãƒˆ
   - ãƒŸãƒ¥ãƒ¼ã‚¸ãƒƒã‚¯ãƒ“ãƒ‡ã‚ª
   - ã‚¤ãƒ³ã‚¹ã‚¿ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³

3. **ç ”ç©¶é–‹ç™º**
   - ãƒ¢ãƒ‡ãƒ«è©•ä¾¡
   - ãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆç”Ÿæˆ
   - æŠ€è¡“ãƒ‡ãƒ¢

## âš ï¸ æ³¨æ„äº‹é …

- VMã¯èµ·å‹•ä¸­å¸¸ã«èª²é‡‘
- ä½¿ç”¨å¾Œã¯å¿…ãšåœæ­¢/å‰Šé™¤
- Preemptible VMã¯24æ™‚é–“ã§åœæ­¢
- ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ã‚³ã‚¹ãƒˆã‚‚è€ƒæ…®

## ğŸ§¹ ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—

```bash
# ã™ã¹ã¦ã®VMã‚’åœæ­¢
gcloud compute instances stop \
  $(gcloud compute instances list --filter="name:video-gen" --format="value(name)") \
  --zone=us-central1-a

# ãƒªã‚½ãƒ¼ã‚¹å‰Šé™¤
gcloud compute instances delete \
  $(gcloud compute instances list --filter="name:video-gen" --format="value(name)") \
  --zone=us-central1-a
```

## ğŸ“ ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°

### CUDA/GPUã‚¨ãƒ©ãƒ¼
```bash
# GPUã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ç¢ºèª
nvidia-smi

# CUDAãƒãƒ¼ã‚¸ãƒ§ãƒ³ç¢ºèª
nvcc --version
```

### ãƒ¡ãƒ¢ãƒªä¸è¶³
- ãƒãƒƒãƒã‚µã‚¤ã‚ºã‚’æ¸›ã‚‰ã™
- è§£åƒåº¦ã‚’ä¸‹ã’ã‚‹
- gradient_checkpointingæœ‰åŠ¹åŒ–

### ç”ŸæˆãŒé…ã„
- xFormersãŒæœ‰åŠ¹ã‹ç¢ºèª
- FP16ã‚’ä½¿ç”¨
- ä¸è¦ãªãƒ­ã‚°ã‚’ç„¡åŠ¹åŒ–

## ğŸ”— é–¢é€£ãƒªã‚½ãƒ¼ã‚¹

- [Stable Diffusion XL](https://huggingface.co/stabilityai/stable-diffusion-xl-base-1.0)
- [Stable Video Diffusion](https://huggingface.co/stabilityai/stable-video-diffusion-img2vid-xt)
- [AnimateDiff](https://github.com/guoyww/AnimateDiff)

---

**Made with â¤ï¸ for efficient GCP credit consumption**